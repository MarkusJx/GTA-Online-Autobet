"use strict";const statusinfo=document.getElementById("statusinfo");let time=0;try{const timeDisp=document.getElementById("time"),gtanotrunningmessage=new mdc.snackbar.MDCSnackbar(document.getElementById("gta-not-running-message"));gtanotrunningmessage.timeoutMs=1e4;const open_editor=document.getElementById("open-editor"),editor_container=document.getElementById("editor-container");let paused=0,running=0,pausing=0,timer=null;function disableEditor(){editor_container.classList.contains("opened")&&editor_container.classList.remove("opened"),document.getElementById("open-editor-button-label").innerText="SHOW EDITOR",open_editor.disabled=!0}function enableEditor(){open_editor.disabled=!1}function ui_keycomb_start(){disableEditor(),startstop.disabled=!0,startTimer(),startstop.disabled=!1,startstop.innerText="stop",statusinfo.innerText="Running",statusinfo.className="text status_running maintext"}function ui_keycomb_stop(){pause(!0)}function start(){if(!gta_running)return void gtanotrunningmessage.open();disableEditor(),startstop.disabled=!0,autobetLib.setStarting(!0);let time=15;var x=setInterval((function(){startstop.innerText="Starting in "+time+"s",time--,time<0&&(clearInterval(x),startTimer(),autobetLib.setStarting(!1),autobetLib.startBetting(),startstop.disabled=!1,startstop.innerText="stop",statusinfo.innerText="Running",statusinfo.className="text status_running maintext")}),1e3)}function is_paused(){pausing&&(pausing=0,startstop.disabled=!1,pauseTimer(),startstop.innerText="start",statusinfo.innerText="Stopped",statusinfo.className="text status_stopped maintext",enableEditor())}function pause(nstoppy){nstoppy||autobetLib.stopBetting(),pausing=1,statusinfo.innerText="Stopping",statusinfo.className="text status_init maintext",startstop.disabled=!0;var x=setInterval(()=>{let value;autobetLib.stopped()&&(clearInterval(x),is_paused())},1e3)}function startTimer(){paused=0,running=1,timer=setInterval(()=>{time=autobetLib.getTimeRunning(),timeDisp.innerText=convertToTime(time)},1e3)}function pauseTimer(){clearInterval(timer),paused=1,running=0}function convertToTime(secs){let hours=Math.floor(secs%86400/3600),minutes=Math.floor(secs%3600/60),seconds=secs%60;return hours=hours<10?"0"+hours:hours,minutes=minutes<10?"0"+minutes:minutes,seconds=seconds<10?"0"+seconds:seconds,hours+":"+minutes+":"+seconds}startstop.addEventListener("click",(function(){running?paused||pausing||pause():start()})),autobetLib.callbacks.setUiKeycombStartCallback(ui_keycomb_start),autobetLib.callbacks.setUiKeycombStopCallback(ui_keycomb_stop)}catch(e){autobetLib.logging.error("jsEditor.js",`Js exception thrown: ${e.message}`),exception()}